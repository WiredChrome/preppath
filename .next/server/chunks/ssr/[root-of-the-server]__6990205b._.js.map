{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 37, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Chrome/Documents/preppath/Firebase/admin.ts"],"sourcesContent":["import {initializeApp, getApps} from 'firebase-admin/app';\r\nimport {getAuth} from 'firebase-admin/auth';\r\nimport {getFirestore} from \"firebase-admin/firestore\";\r\nimport {cert} from 'firebase-admin/app';\r\n\r\n\r\nconst initFirebaseAdmin = () => {\r\n    const apps =getApps();\r\n    if(!apps.length) {\r\n        initializeApp({\r\n            credential: cert({\r\n                projectId: process.env.FIREBASE_PROJECT_ID,\r\n                clientEmail: process.env.FIREBASE_CLIENT_EMAIL,\r\n                privateKey: process.env.FIREBASE_PRIVATE_KEY?.replace(/\\\\n/g, '\\n'),\r\n            })\r\n        })\r\n    }\r\n    return {\r\n        auth: getAuth(),\r\n        db: getFirestore(),\r\n    }\r\n}\r\n\r\nexport const {auth, db} = initFirebaseAdmin();"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;;;AAIA,MAAM,oBAAoB;IACtB,MAAM,OAAM,CAAA,GAAA,gJAAA,CAAA,UAAO,AAAD;IAClB,IAAG,CAAC,KAAK,MAAM,EAAE;QACb,CAAA,GAAA,gJAAA,CAAA,gBAAa,AAAD,EAAE;YACV,YAAY,CAAA,GAAA,gJAAA,CAAA,OAAI,AAAD,EAAE;gBACb,WAAW,QAAQ,GAAG,CAAC,mBAAmB;gBAC1C,aAAa,QAAQ,GAAG,CAAC,qBAAqB;gBAC9C,YAAY,QAAQ,GAAG,CAAC,oBAAoB,EAAE,QAAQ,QAAQ;YAClE;QACJ;IACJ;IACA,OAAO;QACH,MAAM,CAAA,GAAA,kJAAA,CAAA,UAAO,AAAD;QACZ,IAAI,CAAA,GAAA,4JAAA,CAAA,eAAY,AAAD;IACnB;AACJ;AAEO,MAAM,EAAC,IAAI,EAAE,EAAE,EAAC,GAAG","debugId":null}},
    {"offset": {"line": 78, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Chrome/Documents/preppath/lib/actions/auth.action.ts"],"sourcesContent":["'use server'\r\n\r\nimport { db, auth} from \"@/Firebase/admin\";\r\nimport { Auth } from \"firebase-admin/auth\";\r\nimport { collection, doc, getDoc, setDoc } from \"firebase/firestore\";\r\nimport { cookies } from \"next/headers\";\r\n\r\nexport async function signUp(params: SignUpParams) {\r\n\tconst { uid, name, email } = params;\r\n\r\n    try{\r\n        const userDocRef = db.collection('users').doc(uid);\r\n        const userRecord = await userDocRef.get();\r\n        \r\n        if(userRecord.exists) {\r\n            return {\r\n                success: false,\r\n                message: 'User already exists',\r\n            }\r\n        }\r\n        await userDocRef.set({\r\n            name,\r\n            email,\r\n            createdAt: new Date().toISOString(),\r\n        });\r\n        return {\r\n            success: true,\r\n            message: 'User created successfully',\r\n        }\r\n    } catch (e: any) {\r\n        console.error('Error during sign-in:', e);\r\n        if(e.code === 'auth/email-already-in-use') {\r\n            return {\r\n                success: false,\r\n                message: 'Email already in use',\r\n            }\r\n            // throw new Error('Email already in use');\r\n        }\r\n        return{\r\n            success: false,\r\n            message: 'An error occurred during sign-in',\r\n        }\r\n    }\r\n}\r\n\r\nexport async function signIn(params: SignInParams) {\r\n    const { email, idToken } = params;\r\n\r\n    try {\r\n        const userRecord = await auth.getUserByEmail(email);\r\n        if (!userRecord) {\r\n            return {\r\n                success: false,\r\n                message: 'User not found',\r\n            }\r\n        }\r\n\r\n        await setSessionCookie(idToken);\r\n\r\n    } catch (e) {\r\n        console.log(e);\r\n        return {\r\n            success: false,\r\n            message: 'An error occurred during sign-in',\r\n        }\r\n    }\r\n}\r\n\r\nexport async function setSessionCookie(idToken: string) {\r\n    const cookieStore = await cookies();\r\n    const sessionCookie = await auth.createSessionCookie(idToken, {\r\n        expiresIn: 60 * 60 * 24 * 5 * 1000, // 5 days\r\n    });\r\n\r\n    cookieStore.set('session', sessionCookie, {\r\n        maxAge: 60 * 60 * 24 * 5, // 5 days\r\n        httpOnly: true,\r\n        secure: process.env.NODE_ENV === 'production',\r\n        path: '/',\r\n        sameSite: 'lax',\r\n    });\r\n}\r\n\r\nexport async function getCurrentUser(): Promise<User | null> {\r\n    const cookieStore = await cookies();\r\n    const sessionCookie = cookieStore.get('session')?.value;\r\n\r\n    if (!sessionCookie) return null;\r\n\r\n    try {\r\n        const decodedClaims = await auth.verifySessionCookie(sessionCookie, true);\r\n        const userRecord = await db.collection('users').doc(decodedClaims.uid).get();\r\n        if (!userRecord.exists) return null;\r\n\r\n        return {\r\n            ...userRecord.data(),\r\n            id: userRecord.id,\r\n\r\n        } as User;\r\n\r\n        \r\n    } catch (e) {\r\n        console.error('Error verifying session cookie:', e);\r\n        return null;\r\n    }\r\n}\r\n\r\nexport async function isAuthenticated() {\r\n    const user = await getCurrentUser();\r\n\r\n    return !!user; \r\n}"],"names":[],"mappings":";;;;;;;;;AAEA;AAGA;;;;;;;;;;AAEO,eAAe,OAAO,MAAoB;IAChD,MAAM,EAAE,GAAG,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG;IAE1B,IAAG;QACC,MAAM,aAAa,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC;QAC9C,MAAM,aAAa,MAAM,WAAW,GAAG;QAEvC,IAAG,WAAW,MAAM,EAAE;YAClB,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QACA,MAAM,WAAW,GAAG,CAAC;YACjB;YACA;YACA,WAAW,IAAI,OAAO,WAAW;QACrC;QACA,OAAO;YACH,SAAS;YACT,SAAS;QACb;IACJ,EAAE,OAAO,GAAQ;QACb,QAAQ,KAAK,CAAC,yBAAyB;QACvC,IAAG,EAAE,IAAI,KAAK,6BAA6B;YACvC,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACA,2CAA2C;QAC/C;QACA,OAAM;YACF,SAAS;YACT,SAAS;QACb;IACJ;AACJ;AAEO,eAAe,OAAO,MAAoB;IAC7C,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,GAAG;IAE3B,IAAI;QACA,MAAM,aAAa,MAAM,iHAAA,CAAA,OAAI,CAAC,cAAc,CAAC;QAC7C,IAAI,CAAC,YAAY;YACb,OAAO;gBACH,SAAS;gBACT,SAAS;YACb;QACJ;QAEA,MAAM,iBAAiB;IAE3B,EAAE,OAAO,GAAG;QACR,QAAQ,GAAG,CAAC;QACZ,OAAO;YACH,SAAS;YACT,SAAS;QACb;IACJ;AACJ;AAEO,eAAe,iBAAiB,OAAe;IAClD,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,SAAS;QAC1D,WAAW,KAAK,KAAK,KAAK,IAAI;IAClC;IAEA,YAAY,GAAG,CAAC,WAAW,eAAe;QACtC,QAAQ,KAAK,KAAK,KAAK;QACvB,UAAU;QACV,QAAQ,oDAAyB;QACjC,MAAM;QACN,UAAU;IACd;AACJ;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD;IAChC,MAAM,gBAAgB,YAAY,GAAG,CAAC,YAAY;IAElD,IAAI,CAAC,eAAe,OAAO;IAE3B,IAAI;QACA,MAAM,gBAAgB,MAAM,iHAAA,CAAA,OAAI,CAAC,mBAAmB,CAAC,eAAe;QACpE,MAAM,aAAa,MAAM,iHAAA,CAAA,KAAE,CAAC,UAAU,CAAC,SAAS,GAAG,CAAC,cAAc,GAAG,EAAE,GAAG;QAC1E,IAAI,CAAC,WAAW,MAAM,EAAE,OAAO;QAE/B,OAAO;YACH,GAAG,WAAW,IAAI,EAAE;YACpB,IAAI,WAAW,EAAE;QAErB;IAGJ,EAAE,OAAO,GAAG;QACR,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO;IACX;AACJ;AAEO,eAAe;IAClB,MAAM,OAAO,MAAM;IAEnB,OAAO,CAAC,CAAC;AACb;;;IAxGsB;IAsCA;IAuBA;IAeA;IAwBA;;AApGA,+OAAA;AAsCA,+OAAA;AAuBA,+OAAA;AAeA,+OAAA;AAwBA,+OAAA","debugId":null}},
    {"offset": {"line": 206, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Chrome/Documents/preppath/app/%28root%29/layout.tsx"],"sourcesContent":["import {ReactNode} from 'react'\r\nimport Link from 'next/link'\r\nimport Image from 'next/image'\r\nimport { isAuthenticated } from '@/lib/actions/auth.action';\r\nimport { redirect } from 'next/navigation';\r\n\r\nconst RootLayout = async ({ children }: {children: ReactNode }) => {\r\n    const isUserAuthenticated = await isAuthenticated();\r\n\r\n    // if(!isUserAuthenticated) redirect('sign-in');\r\n\r\n    return (\r\n        <div className=\"root-layout\">\r\n            <nav>\r\n                <Link href=\"/\" className=\"flex items-center gap-2\">\r\n                <Image src=\"/logo.svg\" alt=\"Logo\" width={38} height={32} />\r\n                <h2 className=\"text-primary-100\">PrepPath</h2>\r\n                </Link>\r\n            </nav>\r\n            {children}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default RootLayout"],"names":[],"mappings":";;;;AACA;AACA;AACA;;;;;;;;;AAGA,MAAM,aAAa,OAAO,EAAE,QAAQ,EAA0B;IAC1D,MAAM,sBAAsB,MAAM,CAAA,GAAA,gIAAA,CAAA,kBAAe,AAAD;IAEhD,gDAAgD;IAEhD,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC;0BACG,cAAA,8OAAC,4JAAA,CAAA,UAAI;oBAAC,MAAK;oBAAI,WAAU;;sCACzB,8OAAC,6HAAA,CAAA,UAAK;4BAAC,KAAI;4BAAY,KAAI;4BAAO,OAAO;4BAAI,QAAQ;;;;;;sCACrD,8OAAC;4BAAG,WAAU;sCAAmB;;;;;;;;;;;;;;;;;YAGpC;;;;;;;AAGb;uCAEe","debugId":null}}]
}